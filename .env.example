# ============================================================================
# Docker Compose Environment Variables
# ============================================================================

# PostgreSQL Configuration
# ============================================================================
# You CAN customize these values, but they must be consistent across all services.
# The docker-compose.yml and migrations use these environment variables to:
# 1. Initialize the PostgreSQL database and create the superuser
# 2. Construct the DATABASE_URL for backend and MCP server connections
# 3. Validate database health
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=panicless
# PostgreSQL port on HOST machine (container port is always 5432)
POSTGRES_PORT=5432

# Backend API Configuration
# ============================================================================
# Server host (0.0.0.0 = listen on all interfaces)
SERVER_HOST=0.0.0.0
# Server port inside container (don't change this)
SERVER_PORT=8080
# Backend port on HOST machine (container port is always 8080)
BACKEND_PORT=8080

# MCP Server Configuration
# ============================================================================
# MCP Server host (0.0.0.0 = listen on all interfaces)
MCP_SERVER_HOST=0.0.0.0
# Server port inside container (don't change this)
MCP_SERVER_PORT=8081
# MCP Server port on HOST machine (container port is always 8081)
MCP_SERVER_PORT_HOST=8081

# Authentication & Security
# ============================================================================
# JWT Secret (IMPORTANT: Change this in production!)
# Generate a secure random string with: openssl rand -base64 64
JWT_SECRET=your-secret-key-change-in-production-use-64-chars-or-more
# JWT Access Token expiry in seconds (default: 3600 = 1 hour)
JWT_ACCESS_TOKEN_EXPIRY=3600
# JWT Refresh Token expiry in seconds (default: 604800 = 7 days)
JWT_REFRESH_TOKEN_EXPIRY=604800

# Encryption Key for storing API tokens (base64 encoded)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=dGVzdC1lbmNyeXB0aW9uLWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbi1oZXJl

# OAuth2 Configuration (for Anthropic connector)
# ============================================================================
# OAuth Client ID
OAUTH_CLIENT_ID=panicless-library-dev
# OAuth Client Secret (IMPORTANT: Change this in production!)
# Generate a strong secret with: openssl rand -hex 32
OAUTH_CLIENT_SECRET=dev-secret-change-in-production
# Public Base URL (used for OAuth discovery endpoints and redirects)
# For development: leave empty (will default to http://SERVER_HOST:SERVER_PORT)
# For production: set to your public URL (e.g., https://your-domain.com)
PUBLIC_BASE_URL=

# Frontend Configuration (Web UI)
# ============================================================================
# Frontend port on HOST machine (container port is always 80)
FRONTEND_PORT=80
# API Base URL for frontend (used during build)
# For development: http://localhost:8080
# For production: https://your-domain.com
VITE_API_BASE_URL=http://localhost:8080

# CORS Configuration
# ============================================================================
# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Logging
# ============================================================================
# Log level: info, debug, warn, error
# Can include module-specific settings
RUST_LOG=info

# Environment
# ============================================================================
# Environment: development or production
ENVIRONMENT=development
